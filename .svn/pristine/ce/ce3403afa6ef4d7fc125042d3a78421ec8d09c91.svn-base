(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1df00310"],{"54a5":function(e,t,i){},6081:function(e,t,i){},"7db0":function(e,t,i){"use strict";var r=i("23e7"),a=i("b727").find,n=i("44d2"),s="find",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},"7ee9":function(e,t,i){"use strict";i("54a5")},"8f27":function(e,t,i){"use strict";i("6081")},d73e:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home_index"},[i("el-card",{staticClass:"myCard",staticStyle:{width:"100%"}},[i("el-form",{ref:"ruleForm",attrs:{"label-position":"left",model:e.ruleForm,inline:!0,"label-width":"100px",border:""}},[i("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"name"}},[i("el-input",{attrs:{autocomplete:"off",clearable:"",placeholder:"用户账号"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("查询")]),e.getAuthorityFunc("create")?i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addFormFn}},[e._v("新增")]):e._e(),e.getAuthorityFunc("delete")?i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.deleteSelect(2)}}},[e._v("删除")]):e._e()],1)],1)],1),i("div",{staticClass:"page_con"},[i("list",{ref:"list",attrs:{name:e.ruleForm.name},on:{dataBind:e.dataBind}})],1),i("el-dialog",{attrs:{center:"",title:e.isUpdate?"修改用户信息":"新增用户信息",visible:e.dialogVisible,width:"576px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"addRuleForm",staticClass:"add",attrs:{model:e.addRuleForm,rules:e.addRules,"label-width":"120px","label-position":"top"}},[i("el-form-item",{staticClass:"admins",attrs:{label:"用户账号",prop:"admins"}},[e.isUpdate?i("el-input",{attrs:{autocomplete:"off",clearable:"",disabled:""},model:{value:e.addRuleForm.admins,callback:function(t){e.$set(e.addRuleForm,"admins",t)},expression:"addRuleForm.admins"}}):i("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"用户账号","trigger-on-focus":!1,clearable:"",debounce:500},on:{select:e.handleSelect},model:{value:e.addRuleForm.admins,callback:function(t){e.$set(e.addRuleForm,"admins",t)},expression:"addRuleForm.admins"}})],1),i("el-form-item",{staticClass:"admins",staticStyle:{width:"100%"},attrs:{label:"查询次数：",prop:"repair_inquire_free_limits"}},[i("el-input-number",{attrs:{min:0},model:{value:e.addRuleForm.repair_inquire_free_limits,callback:function(t){e.$set(e.addRuleForm,"repair_inquire_free_limits",t)},expression:"addRuleForm.repair_inquire_free_limits"}})],1),i("el-form-item",{staticClass:"admins",attrs:{label:"体检次数：",prop:"credits_checks_free_limits"}},[i("el-input-number",{attrs:{min:0},model:{value:e.addRuleForm.credits_checks_free_limits,callback:function(t){e.$set(e.addRuleForm,"credits_checks_free_limits",t)},expression:"addRuleForm.credits_checks_free_limits"}})],1),i("el-form-item",{staticClass:"admins",staticStyle:{width:"100%"},attrs:{label:"修复次数：",prop:"credits_repair_free_limits"}},[i("el-input-number",{attrs:{min:0},model:{value:e.addRuleForm.credits_repair_free_limits,callback:function(t){e.$set(e.addRuleForm,"credits_repair_free_limits",t)},expression:"addRuleForm.credits_repair_free_limits"}})],1),i("el-form-item",{staticClass:"admins",attrs:{label:"是否员工",prop:"is_employee"}},[i("el-radio-group",{model:{value:e.addRuleForm.is_employee,callback:function(t){e.$set(e.addRuleForm,"is_employee",t)},expression:"addRuleForm.is_employee"}},[i("el-radio",{attrs:{label:"1"}},[e._v("是")]),i("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm("addRuleForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"medium",loading:e.btnLoad},on:{click:e.addOrUpdateSysMenus}},[e._v("确 定")])],1)],1)],1)},a=[],n=i("1da1"),s=i("5530"),l=(i("96cf"),i("159b"),i("4de4"),i("7db0"),i("2f62")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoad,expression:"isLoad"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"用户ID",width:"120",prop:"id"}}),i("el-table-column",{attrs:{prop:"admins",label:"用户账号"}}),i("el-table-column",{attrs:{prop:"is_employee",label:"是否是员工"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_employee?"是":"否")+" ")]}}])}),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e.result(e.getAuthorityFunc("edit"),e.getAuthorityFunc("delete"))?i("el-table-column",{attrs:{prop:"option",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getAuthorityFunc("edit")?i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.updateMenu(2,t.row)}}},[e._v("修改")]):e._e(),e.getAuthorityFunc("delete")?i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.deleteMenu(1,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,3243005225)}):e._e()],1),i("div",{staticClass:"page_tion"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","page-size":e.size,"current-page":e.page,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},u=[],c=(i("b0c0"),{data:function(){return{isLoad:!1,page:1,size:10,total:0,tableData:[],multipleSelection:[],checked:!1,deleteList:[]}},props:["name"],computed:Object(s["a"])({},Object(l["c"])(["getToken","getAuthority"])),created:function(){this.initList(1)},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])({getUserList:"loginModule/getUserList",UserDelete:"loginModule/UserDelete",insertJournal:"loginModule/insertJournal"})),{},{result:function(e,t){return 0!=e||0!=t},getAuthorityFunc:function(e){var t=this;if(this.getAuthority&&0!=this.getAuthority.length){var i=this.getAuthority.find((function(e){return e.code==t.$route.path}));if(i&&i.child&&0!=i.child.length)return i.child.some((function(t){return t.code==e}))}},handleSelectionChange:function(e){this.multipleSelection=e},updateMenu:function(e,t){this.$emit("dataBind",e,t)},initList:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,1==e&&(t.page=1),t.isLoad=!0,r={token:t.getToken,admins:t.name,page:t.page,page_size:t.size},i.next=6,t.getUserList(r);case 6:if(a=i.sent,1==a.code){i.next=9;break}return i.abrupt("return",t.$message.error(a.msg));case 9:t.tableData=a.data.list,t.tableData.forEach((function(e){e.system="修尔信系统后台"})),t.total=a.data.count,i.next=18;break;case 14:i.prev=14,i.t0=i["catch"](0),console.log(i.t0),t.initList(e);case 18:return i.prev=18,t.isLoad=!1,i.finish(18);case 21:case"end":return i.stop()}}),i,null,[[0,14,18,21]])})))()},toggleAllSelect:function(){this.$refs.multipleTable.toggleAllSelection()},logOption:function(e,t){var i={plate:"账号管理",plateRouter:"/accountAdmin",user:this.$store.state.userInfo.identity_name,userId:111,action:t,time:new Date,content:e};this.insertJournal(i)},deleteMenu:function(e,t){var i=this;this.deleteList=[];var r=[];if(1==e?(r.push(t.id),this.deleteList.push(t)):this.multipleSelection.forEach((function(e){r.push(e.id),i.deleteList.push(e)})),this.deleteList&&0==this.deleteList.length)return this.$message.warning("请选择要删除的人员！");this.$confirm("是否删除人员，删除后该人员不享有免费权限？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i.isLoad=!0,t={token:i.getToken,id:r},e.next=5,i.UserDelete(t);case 5:if(a=e.sent,1==a.code){e.next=8;break}return e.abrupt("return",i.$message.error(a.msg));case 8:i.$message({type:"success",message:"删除成功!"}),i.deleteList.forEach((function(e){var t={"用户账号":e.admins,"体检次数":e.credits_checks_free_limits,"修复次数":e.credits_repair_free_limits,"查询次数":e.repair_inquire_free_limits,"是否员工":1==e.is_employee?"是":"否"};i.logOption(t,3)})),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:return e.prev=15,i.initList(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})))).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.size=e,this.initList()},handleCurrentChange:function(e){this.page=e,this.initList()}})}),d=c,m=(i("8f27"),i("2877")),p=Object(m["a"])(d,o,u,!1,null,"760c7d36",null),f=p.exports,h={data:function(){return{btnLoad:!1,dialogVisible:!1,val:"你好",ruleForm:{name:""},addRuleForm:{id:null,admins:"",credits_checks_free_limits:0,credits_repair_free_limits:0,repair_inquire_free_limits:0,is_employee:"1"},isUpdate:!1,addRules:{is_employee:[{required:!0,message:"请选择是否是员工",trigger:"blur"}]},oldForm:{},restaurants:[],state:""}},components:{list:f},created:function(){},mounted:function(){},computed:Object(s["a"])({},Object(l["c"])(["getToken","getAuthority"])),methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])({userCreate:"loginModule/userCreate",userUpdate:"loginModule/userUpdate",insertJournal:"loginModule/insertJournal",searchList:"loginModule/searchList"})),{},{loadAll:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var r,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r={token:t.getToken,admins:e},i.next=3,t.searchList(r);case 3:a=i.sent,1!=a.code?t.restaurants=[]:(n=[],a.data.forEach((function(e){var t={value:e};n.push(t)})),t.restaurants=n);case 5:case"end":return i.stop()}}),i)})))()},querySearch:function(e,t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i.loadAll(e);case 2:a=i.restaurants,n=e?a.filter(i.createStateFilter(e)):a,t(n);case 5:case"end":return r.stop()}}),r)})))()},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e),this.addRuleForm.admins=e.value},getAuthorityFunc:function(e){var t=this;if(this.getAuthority&&0!=this.getAuthority.length){var i=this.getAuthority.find((function(e){return e.code==t.$route.path}));if(i&&i.child&&0!=i.child.length)return i.child.some((function(t){return t.code==e}))}},addFormFn:function(){this.dialogVisible=!0,this.addRuleForm={id:null,admins:"",credits_checks_free_limits:0,credits_repair_free_limits:0,repair_inquire_free_limits:0,is_employee:"1"}},deleteSelect:function(e){this.$refs.list.deleteMenu(e)},copyData:function(e){return JSON.parse(JSON.stringify(e))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$refs.list.initList(1)}))},resetForm:function(e,t){var i=this;this.dialogVisible=!1,this.$refs[e].resetFields(),0==t&&this.$nextTick((function(){i.$refs.list.initList(1)}))},dataBind:function(e,t){this.dialogVisible=!0;var i=this.copyData(t);this.oldForm=this.copyData(i),this.addRuleForm=i,this.isUpdate=2==e},handleClose:function(){this.restaurants=[],this.dialogVisible=!1,this.isUpdate=!1,this.$refs.addRuleForm.resetFields()},logOption:function(e,t,i){var r={plate:"账号管理",plateRouter:"/accountAdmin",user:this.$store.state.userInfo.identity_name,userId:111,action:i,time:new Date,content:e};t&&(r.beforeCon=t),this.insertJournal(r)},addOrUpdateSysMenus:function(){var e=this;this.$refs.addRuleForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=34;break}if(e.btnLoad=!0,t.prev=2,r={token:e.getToken,admins:e.addRuleForm.admins,credits_checks_free_limits:e.addRuleForm.credits_checks_free_limits,credits_repair_free_limits:e.addRuleForm.credits_repair_free_limits,repair_inquire_free_limits:e.addRuleForm.repair_inquire_free_limits,is_employee:e.addRuleForm.is_employee},e.isUpdate&&(r.id=e.addRuleForm.id),!e.isUpdate){t.next=11;break}return t.next=8,e.userUpdate(r);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,e.userCreate(r);case 13:t.t0=t.sent;case 14:if(a=t.t0,1==a.code){t.next=17;break}return t.abrupt("return",e.$message.error(a.msg));case 17:e.$message.success(e.isUpdate?"修改成功!":"添加成功!"),n={"用户账号":e.addRuleForm.admins,"体检次数":e.addRuleForm.credits_checks_free_limits,"修复次数":e.addRuleForm.credits_repair_free_limits,"查询次数":e.addRuleForm.repair_inquire_free_limits,"是否员工":1==e.addRuleForm.is_employee?"是":"否"},e.isUpdate?(s={"用户账号":e.oldForm.admins,"体检次数":e.oldForm.credits_checks_free_limits,"修复次数":e.oldForm.credits_repair_free_limits,"查询次数":e.oldForm.repair_inquire_free_limits,"是否员工":1==e.oldForm.is_employee?"是":"否"},e.logOption(n,s,2)):e.logOption(n,s,1),t.next=25;break;case 22:t.prev=22,t.t1=t["catch"](2),console.log(t.t1);case 25:return t.prev=25,e.dialogVisible=!1,e.isUpdate=!1,e.btnLoad=!1,e.$refs.addRuleForm.resetFields(),e.$refs.list.initList(1),t.finish(25);case 32:t.next=36;break;case 34:return console.log("error submit!!"),t.abrupt("return",!1);case 36:case"end":return t.stop()}}),t,null,[[2,22,25,32]])})));return function(e){return t.apply(this,arguments)}}())}})},_=h,g=(i("7ee9"),Object(m["a"])(_,r,a,!1,null,"572ab2aa",null));t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-1df00310.ba10e5a2.js.map