(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4181b252","chunk-a0557fb0"],{"19d1":function(e,t,r){},"2c72":function(e,t,r){"use strict";var o=r("c462"),i=r.n(o);i.a},"2ef3":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"none"},attrs:{action:e.serverUrl,name:"file",headers:e.header,"show-file-list":!1,"list-type":"picture",multiple:!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload}}),r("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},i=[],l=(r("a9e3"),r("5530")),a=r("2f62"),n=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]],s={props:{value:{type:String},maxSize:{type:Number,default:4e3}},components:{},data:function(){return{content:this.value,quillUpdateImg:!1,editorOption:{theme:"snow",placeholder:"您想说点什么？",modules:{toolbar:{container:n,handlers:{image:function(e){e?document.querySelector(".avatar-uploader input").click():this.quill.format("image",!1)}}}}},serverUrl:"http://114.113.149.156:8909/api/filesup/files",header:{}}},methods:Object(l["a"])(Object(l["a"])({},Object(a["b"])({uploadFile:"loginModule/uploadFile"})),{},{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("editor",this.content)},beforeUpload:function(){this.quillUpdateImg=!0},uploadSuccess:function(e,t){var r=this.$refs.myQuillEditor.quill;if(1==e.code){var o=r.getSelection().index;r.insertEmbed(o,"image",e.data.file_details[0].urls),r.setSelection(o+1)}else this.$message.error("图片插入失败");this.quillUpdateImg=!1},uploadError:function(){this.quillUpdateImg=!1,this.$message.error("图片插入失败")}})},u=s,c=(r("2c72"),r("2877")),d=Object(c["a"])(u,o,i,!1,null,"4169f07e",null);t["default"]=d.exports},"36fc":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-form",{ref:"ruleForm",staticStyle:{"margin-bottom":"20px"},attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题:","label-width":e.formLabelWidth,prop:"title"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"文章类型:","label-width":e.formLabelWidth,prop:"types_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.types_id,callback:function(t){e.$set(e.ruleForm,"types_id",t)},expression:"ruleForm.types_id"}},e._l(e.types,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"文章来源:","label-width":e.formLabelWidth,prop:"source"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},e._l(e.source,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否推荐:","label-width":e.formLabelWidth}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("否")])],1),r("el-form-item",{attrs:{label:"推荐封面:","label-width":e.formLabelWidth,prop:"imgid"}},[r("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.ruleForm.fileList1,"on-change":e.handleChange1,"auto-upload":!1,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),r("el-form-item",{staticStyle:{height:"420px"},attrs:{label:"内容:","label-width":e.formLabelWidth}},[r("editor",{on:{editor:e.editorCon}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},i=[],l=(r("fb6a"),r("b0c0"),r("5530")),a=r("2f62"),n=r("2ef3"),s={name:"insert",data:function(){return{ruleForm:{title:"",types_id:"",recommend:"0",source:"",fileList1:[],imgid:"",contents:""},dialogVisible:!1,dialogImageUrl:"",types:[],source:[],formLabelWidth:"120px",imgurls:"",rules:{title:[{required:!0,trigger:"blur",message:"请填文章标题"}],types_id:[{required:!0,trigger:"blur",message:"请选择文章类型"}],source:[{required:!0,trigger:"blur",message:"请选择文章来源"}],imgid:[{required:!0,trigger:"blur",message:"请上次推荐图片"}]}}},props:{},components:{editor:n["default"]},created:function(){this.Bind()},methods:Object(l["a"])(Object(l["a"])({},Object(a["b"])({insertArt:"loginModule/insertArt",getArtTypeList:"loginModule/getArtTypeList",getArtSourceList:"loginModule/getArtSourceList",uploadFile:"loginModule/uploadFile",insertJournal:"loginModule/insertJournal"})),{},{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){},editorCon:function(e){this.ruleForm.contents=e},handleChange1:function(e,t){var r=this,o=new FormData;o.append("formdata",e.raw),this.uploadFile(o).then((function(e){1==e.code?(r.ruleForm.imgid=e.data.formdata[0],r.ruleForm.fileList1=t.slice(-1),r.imgurls=e.data.formdata_details[0].urls):r.$message({type:"warning",message:e.msg})}))},cancel:function(){this.$emit("formok",!1)},Bind:function(){var e=this,t={token:this.$store.state.token,column:["*"],filter:{},offset:0,limit:0};this.getArtTypeList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.types.push({value:t.data.list[r].id,label:t.data.list[r].name})})),this.getArtSourceList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.source.push({value:t.data.list[r].id,label:t.data.list[r].name})}))},getNameType:function(e){for(var t=0;t<this.types.length;t++)if(parseInt(this.types[t].value)==parseInt(e))return this.types[t].label},getSource:function(e){for(var t=0;t<this.source.length;t++)if(parseInt(e)==parseInt(this.source[t].value))return this.source[t].label},submit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var r={token:e.$store.state.token,title:e.ruleForm.title,types_id:e.ruleForm.types_id,contents:e.ruleForm.contents,image_link:e.ruleForm.imgid,recommend:e.ruleForm.recommend,source:e.ruleForm.source};e.insertArt(r).then((function(t){if(1==t.code){e.$message({message:"操作成功！",type:"success"});var r={plate:"文章管理",plateRouter:"/article",user:e.$store.state.userInfo.identity_name,userId:111,action:1,time:new Date,content:{"文章标题":e.ruleForm.title,"文章类型":e.getNameType(e.ruleForm.types_id),"文章来源":e.getSource(e.ruleForm.source),"是否推荐":1==parseInt(e.ruleForm.recommend)?"是":"否","推荐封面":'<img style="max-height: 100%;max-width: 100%;" src="'.concat(e.imgurls,'"/>'),"内容":e.ruleForm.contents}};e.insertJournal(r),e.$emit("formok","aaa")}else e.$message.error(t.msg)}))}))}})},u=s,c=(r("5488f"),r("2877")),d=Object(c["a"])(u,o,i,!1,null,"161be5b4",null);t["default"]=d.exports},"5488f":function(e,t,r){"use strict";var o=r("19d1"),i=r.n(o);i.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var o=r("1d80"),i=r("5899"),l="["+i+"]",a=RegExp("^"+l+l+"*"),n=RegExp(l+l+"*$"),s=function(e){return function(t){var r=String(o(t));return 1&e&&(r=r.replace(a,"")),2&e&&(r=r.replace(n,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,r){var o=r("861d"),i=r("d2bb");e.exports=function(e,t,r){var l,a;return i&&"function"==typeof(l=t.constructor)&&l!==r&&o(a=l.prototype)&&a!==r.prototype&&i(e,a),e}},a9e3:function(e,t,r){"use strict";var o=r("83ab"),i=r("da84"),l=r("94ca"),a=r("6eeb"),n=r("5135"),s=r("c6b6"),u=r("7156"),c=r("c04e"),d=r("d039"),m=r("7c73"),f=r("241c").f,p=r("06cf").f,h=r("9bf2").f,g=r("58a8").trim,b="Number",v=i[b],y=v.prototype,F=s(m(y))==b,I=function(e){var t,r,o,i,l,a,n,s,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+u}for(l=u.slice(2),a=l.length,n=0;n<a;n++)if(s=l.charCodeAt(n),s<48||s>i)return NaN;return parseInt(l,o)}return+u};if(l(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var _,k=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof k&&(F?d((function(){y.valueOf.call(r)})):s(r)!=b)?u(new v(I(t)),r,k):I(t)},E=o?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;E.length>w;w++)n(v,_=E[w])&&!n(k,_)&&h(k,_,p(v,_));k.prototype=y,y.constructor=k,a(i,b,k)}},c462:function(e,t,r){},fb6a:function(e,t,r){"use strict";var o=r("23e7"),i=r("861d"),l=r("e8b5"),a=r("23cb"),n=r("50c4"),s=r("fc6a"),u=r("8418"),c=r("b622"),d=r("1dde"),m=r("ae40"),f=d("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),h=c("species"),g=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var r,o,c,d=s(this),m=n(d.length),f=a(e,m),p=a(void 0===t?m:t,m);if(l(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!l(r.prototype)?i(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(d,f,p);for(o=new(void 0===r?Array:r)(b(p-f,0)),c=0;f<p;f++,c++)f in d&&u(o,c,d[f]);return o.length=c,o}})}}]);
//# sourceMappingURL=chunk-4181b252.5dbdecec.js.map