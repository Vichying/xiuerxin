(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31663298"],{"01cb":function(e,t,n){"use strict";n.r(t);var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details1"},[n("ul",[n("li",[n("p",[n("span",[e._v("操作板块：")]),n("span",[e._v(e._s(e.datas.plate))])])]),n("li",[n("p",[n("span",[e._v("操作人：")]),n("span",[e._v(e._s(e.datas.user))])])]),n("li",[n("p",[n("span",[e._v("操作时间：")]),n("span",[e._v(e._s(e.getTime(e.datas.time)))])])]),n("li",[n("p",[n("span",[e._v("操作后：")]),n("span",[n("p",[e._v(" "+e._s(1==e.datas.action?"新增":2==e.datas.action?"修改":"删除")+" ")]),"/examine"!=e.datas.plateRouter?n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.contentZh(e.datas.content,2))},on:{click:function(t){e.isSet&&e.showSet(2)}}}):n("div",{staticClass:"content"},[n("el-link",{attrs:{type:"primary"},on:{click:e.goDetails}},[e._v("查看详情")])],1)])])]),2==e.datas.action?n("li",[n("p",[n("span",[e._v("操作前：")]),n("span",["/examine"!=e.datas.plateRouter?n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.contentZh(e.datas.beforeCon,1))},on:{click:function(t){e.isSet&&e.showSet(1)}}}):n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.contentBefore(e.datas.beforeCon))}})])])]):e._e()])])},i=[];n("99af"),n("d3b7"),n("25f0"),n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n("a7fe");var r=n("ea5b"),o={name:"details1",data:function(){return{anjianList:[],isSet:!1,old_tree:[],tree:[]}},props:{datas:{type:Object}},components:{treeTable:r["a"]},created:function(){},methods:{goDetails:function(){console.log(this.datas.content);var e=this.datas.content["请进入详情查看"],t=this.$router.resolve({path:"/examineDetails",query:{isPersonal:e.isPersonal,mainsId:e.id}}),n=t.href;window.open(n,"_blank")},showSet:function(e){var t=[];t=1==e?this.old_tree:this.tree,this.$emit("func",t)},getTime:function(e){return this.dayjs(e).format("YYYY-MM-DD HH:mm:ss")},contentZh:function(e,t){var n="";for(var c in e)"设置权限"==c?(this.isSet=!0,n+="<p>".concat(c+":<span style='color: #409EFF;font-size:14px;cursor: pointer;'>查看权限</span>","<p>"),1==t?this.old_tree=JSON.parse(e[c]):this.tree=JSON.parse(e[c])):n+="<p>".concat(c+":"+e[c],"<p>");return n},contentAffter:function(e){var t="";for(var n in e)t+="<p>".concat(n+":"+e[n],"<p>");return t},isJson:function(e){var t="object"==a(e)&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length;return t},contentBefore:function(e){var t="";for(var n in e)if(e[n]instanceof Array&&e[n].length>0)for(var c=0;c<e[n].length;c++)if(this.isJson(e[n][c])){for(var i in e[n][c])if("id"!=i){var a="",r="";if(e[n][c][i]instanceof Array)for(var o=0;o<e[n][c][i].length;o++)r+="<p>".concat(i,':</p><img style="margin-top:8px;max-width:100%;" src="').concat(e[n][c][i][o],'"/>');else a="<p>".concat(i,":").concat(e[n][c][i],"</p>");t+='<div style="margin-bottom:20px">\n                                        '.concat(a,'\n                                        <div style="margin-bottom:10px">\n                                         ').concat(r,"\n                                        </div>\n                                      </div>")}}else t+='<div style="margin-bottom:20px">\n                                <p>'.concat(n,':</p><img style="margin-top:8px;max-width:100%;" src="').concat(e[n][c],'"/>\n                                </div>');else t+='<div style="margin-bottom:20px"><p>'.concat(n,':</p><img style="margin-top:8px;max-width:100%;" src="').concat(e[n],'"/></div>');return t}}},s=o,l=(n("5a8e"),n("2877")),d=Object(l["a"])(s,c,i,!1,null,"059e1f2e",null);t["default"]=d.exports},"25f0":function(e,t,n){"use strict";var c=n("6eeb"),i=n("825a"),a=n("d039"),r=n("ad6d"),o="toString",s=RegExp.prototype,l=s[o],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=o;(d||h)&&c(RegExp.prototype,o,(function(){var e=i(this),t=String(e.source),n=e.flags,c=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?r.call(e):n);return"/"+t+"/"+c}),{unsafe:!0})},"3ca3":function(e,t,n){"use strict";var c=n("6547").charAt,i=n("69f3"),a=n("7dd0"),r="String Iterator",o=i.set,s=i.getterFor(r);a(String,"String",(function(e){o(this,{type:r,string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=c(n,i),t.index+=e.length,{value:e,done:!1})}))},"45fc":function(e,t,n){"use strict";var c=n("23e7"),i=n("b727").some,a=n("a640"),r=n("ae40"),o=a("some"),s=r("some");c({target:"Array",proto:!0,forced:!o||!s},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a8e":function(e,t,n){"use strict";var c=n("dea6"),i=n.n(c);i.a},"70e8":function(e,t,n){"use strict";var c=n("d9e1"),i=n.n(c);i.a},a7fe:function(e,t,n){"use strict";n("ac1f"),n("5319");t["a"]={getSJC:function(e){var t=new Date(e),n=t.getFullYear()+"-"+parseInt(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),c=new Date(n);c=new Date(n.replace(/-/g,"/"));return Math.round(Date.parse(c)/1e3)},getRQ:function(e){if(""==e||null==e)return"";var t=new Date(parseInt(1e3*e)),n=t.getFullYear(),c=t.getMonth()+1;c=c<10?"0"+c:c;var i=t.getDate();i=i<10?"0"+i:i;var a=t.getHours();a=a<10?"0"+a:a;var r=t.getMinutes(),o=t.getSeconds();r=r<10?"0"+r:r,o=o<10?"0"+o:o;var s=n+"-"+c+"-"+i+"  "+a+":"+r;return s}}},d28b:function(e,t,n){var c=n("746f");c("iterator")},d9e1:function(e,t,n){},ddb0:function(e,t,n){var c=n("da84"),i=n("fdbc"),a=n("e260"),r=n("9112"),o=n("b622"),s=o("iterator"),l=o("toStringTag"),d=a.values;for(var h in i){var u=c[h],f=u&&u.prototype;if(f){if(f[s]!==d)try{r(f,s,d)}catch(v){f[s]=d}if(f[l]||r(f,l,h),i[h])for(var p in a)if(f[p]!==a[p])try{r(f,p,a[p])}catch(v){f[p]=a[p]}}}},dea6:function(e,t,n){},e01a:function(e,t,n){"use strict";var c=n("23e7"),i=n("83ab"),a=n("da84"),r=n("5135"),o=n("861d"),s=n("9bf2").f,l=n("e893"),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var h={},u=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof u?new d(e):void 0===e?d():d(e);return""===e&&(h[t]=!0),t};l(u,d);var f=u.prototype=d.prototype;f.constructor=u;var p=f.toString,v="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;s(f,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=p.call(e);if(r(h,e))return"";var n=v?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),c({global:!0,forced:!0},{Symbol:u})}},ea5b:function(e,t,n){"use strict";var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.treeData&&0!=e.treeData.length?n("div",[e._m(0),n("div",{staticClass:"tableBox"},[n("div",{staticClass:"ord"},e._l(e.treeData,(function(t){return n("div",{key:t.id,staticClass:"box"},[n("div",{staticClass:"fu"},[n("el-checkbox",{attrs:{disabled:e.isSelect},on:{change:function(n){return e.checkedBtn(t)}},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"item.checked"}},[e._v(e._s(t.name))])],1),n("div",{staticClass:"zi"},e._l(t.child,(function(t){return n("div",{key:t.id,staticClass:"item"},[n("div",{staticClass:"er"},[n("el-checkbox",{attrs:{disabled:e.isSelect},on:{change:function(n){return e.checkedBtn(t)}},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"it.checked"}},[e._v(e._s(t.name))])],1),n("div",{staticClass:"opt"},e._l(t.child,(function(t){return n("span",{key:t.id},[n("el-checkbox",{attrs:{disabled:e.isSelect},on:{change:function(n){return e.checkedBtn(t)}},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"its.checked"}},[e._v(e._s(t.name))])],1)})),0)])})),0)])})),0),n("div",{staticClass:"sys"},[n("el-checkbox",{attrs:{disabled:e.isSelect},on:{change:e.checkAllFunc},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("修尔信后台")])],1)])]):n("div",[n("h3",{staticStyle:{"text-align":"center"}},[e._v("暂无内容！")])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head"},[n("ul",[n("li",[e._v("系统")]),n("li",[e._v("一级菜单")]),n("li",[e._v("二级菜单")]),n("li",[e._v("操作")])])])}],a=(n("7db0"),n("4160"),n("45fc"),n("159b"),n("96cf"),n("1da1")),r=n("5530"),o=n("2f62"),s={data:function(){return{checkAll:!1,selectId:[],tree:[],old_tree:[]}},props:["treeData","row","isSelect"],computed:Object(r["a"])({},Object(o["c"])(["getToken"])),created:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])({sysrolesUpdate:"loginModule/sysrolesUpdate",insertJournal:"loginModule/insertJournal"})),{},{dab:function(e){var t=[];e.forEach((function(e){e.child&&0!=e.child.length&&(t.push(e),e.child.forEach((function(n){n.pid=e.id,t.push(n),n.child&&0!=n.child.length&&n.child.forEach((function(e){e.pid=n.id,t.push(e)}))})))})),this.treeData.forEach((function(e){t.forEach((function(t){e.id==t.id&&(e.checked=!0),e.child&&0!=e.child.length&&e.child.forEach((function(n){n.id==t.id&&t.pid==e.id&&(n.checked=!0),n.child&&0!=n.child.length&&n.child.forEach((function(e){e.id==t.id&&t.pid==n.id&&(e.checked=!0)}))}))}))})),this.checkAll=this.treeData.some((function(e){return 1==e.checked})),this.old_tree=JSON.parse(JSON.stringify(this.treeData)),this.$forceUpdate()},logOption:function(e,t,n){var c={plate:"角色管理",plateRouter:"/character",user:this.$store.state.userInfo.identity_name,userId:111,action:t,time:new Date,content:e};n&&(c.beforeCon=n),this.insertJournal(c)},sysrolesUpdateFun:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,c,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.selectId||0!=e.selectId.length){t.next=3;break}return e.$emit("hideDia"),t.abrupt("return");case 3:return n={token:e.getToken,id:e.row.id,role_name:e.row.role_name,check_ids:e.selectId},t.next=6,e.sysrolesUpdate(n);case 6:if(c=t.sent,1==c.code){t.next=9;break}return t.abrupt("return",e.$message.error(c.msg));case 9:e.$message.success("设置成功！"),e.selectId=[],e.$emit("func"),i={"角色ID":e.row.id,"角色名称":e.row.role_name,"是否启用":1==e.row.status?"启用":"禁用","创建时间":e.row.create_time,"设置权限":JSON.stringify(e.old_tree)},a={"角色ID":e.row.id,"角色名称":e.row.role_name,"是否启用":1==e.row.status?"启用":"禁用","创建时间":e.row.create_time,"设置权限":JSON.stringify(e.tree)},e.logOption(a,2,i);case 15:case"end":return t.stop()}}),t)})))()},getSelectId:function(){var e=this;this.selectId=[],this.treeData.forEach((function(t){if(t.checked){var n={};n.id=t.id,t.child&&0!=t.child.length&&(n.child=[],t.child.forEach((function(e){if(e.checked){var t={};t.id=e.id,e.child&&0!=e.child.length&&(t.child=[],e.child.forEach((function(e){if(e.checked){var n={};n.id=e.id,t.child.push(n)}}))),n.child.push(t)}}))),e.selectId.push(n)}}))},checkedBtn:function(e){this.checkFn(e),1==e.type||(2==e.type?e.checked?this.treeData.find((function(t){return e.pid==t.id})).checked=e.checked:this.treeData.forEach((function(e){e.child&&0!=e.child.length&&(e.checked=e.child.some((function(e){return 1==e.checked})))})):e.checked&&this.treeData.forEach((function(e){e.child.forEach((function(t){if(t.child&&0!=t.child.length){var n=t.child.some((function(e){return 1==e.checked}));n&&(t.checked=!0)}e.child&&0!=e.child.length&&(e.checked=e.child.some((function(e){return 1==e.checked})))}))}))),this.checkAll=this.treeData.some((function(e){return 1==e.checked})),this.tree=JSON.parse(JSON.stringify(this.treeData)),this.getSelectId(),this.$forceUpdate()},checkFn:function(e){var t=this;e.child&&0!=e.child.length&&e.child.forEach((function(n){n.checked=e.checked,t.checkFn(n)}))},checkAllFunc:function(){var e=this;this.treeData.forEach((function(t){t.checked=e.checkAll,e.checkFn(t)})),this.getSelectId(),this.tree=JSON.parse(JSON.stringify(this.treeData))}})},l=s,d=(n("70e8"),n("2877")),h=Object(d["a"])(l,c,i,!1,null,"0bb53b1c",null);t["a"]=h.exports}}]);
//# sourceMappingURL=chunk-31663298.21a5f62f.js.map