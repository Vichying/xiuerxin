(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04715b1d"],{"607a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home_index"},[r("el-card",{staticClass:"myCard",staticStyle:{width:"100%"}},[r("el-form",{ref:"ruleForm",attrs:{"label-position":"left",model:e.ruleForm,inline:!0,"label-width":"100px"}},[r("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"name"}},[r("el-input",{attrs:{autocomplete:"off",clearable:"",placeholder:"角色名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticStyle:{"margin-right":"40px"},attrs:{prop:"name"}},[r("el-select",{attrs:{placeholder:"是否启用"},on:{change:e.search},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("查询")]),e.getAuthorityFunc("create")?r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]):e._e()],1)],1)],1),r("div",{staticClass:"page_con"},[r("list",{ref:"list",attrs:{name:e.ruleForm.name,status:e.ruleForm.status}})],1),r("el-dialog",{attrs:{center:"",title:"新增角色",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"addRuleForm",staticClass:"add",attrs:{model:e.addRuleForm,rules:e.addRules,"label-width":"120px","label-position":"top"}},[r("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[r("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:e.addRuleForm.name,callback:function(t){e.$set(e.addRuleForm,"name",t)},expression:"addRuleForm.name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.resetForm("addRuleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.sysrolesCreateFunc}},[e._v("确 定")])],1)],1)],1)},s=[],i=(r("7db0"),r("45fc"),r("b0c0"),r("96cf"),r("1da1")),n=r("5530"),l=r("2f62"),o=r("79fd"),u={data:function(){return{defaultProps:{children:"child",label:"name"},treeData:[{id:"0",name:"修尔信后台",child:[]}],check_ids:[],options:[{value:0,label:"全部"},{value:1,label:"启用"},{value:2,label:"禁用"}],dialogVisible:!1,val:"你好",ruleForm:{name:"",status:0},addRuleForm:{name:""},addRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}}},components:{list:o["default"]},created:function(){this.getTreelist()},mounted:function(){},computed:Object(n["a"])({},Object(l["c"])(["getToken","getAuthority"])),methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])({sysrolesTreelist:"loginModule/sysrolesTreelist",sysrolesCreate:"loginModule/sysrolesCreate",insertJournal:"loginModule/insertJournal"})),{},{getAuthorityFunc:function(e){var t=this;if(this.getAuthority&&0!=this.getAuthority.length){var r=this.getAuthority.find((function(e){return e.code==t.$route.path}));if(r&&r.child&&0!=r.child.length)return r.child.some((function(t){return t.code==e}))}},getTreelist:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sysrolesTreelist({token:e.getToken});case 3:if(r=t.sent,1==r.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.msg));case 6:e.treeData[0].child=r.data.treeData,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),e.getTreelist();case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,null,[[0,9,13,15]])})))()},search:function(){var e=this;this.$nextTick((function(){e.$refs.list.initList()}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$refs.list.initList(1)}))},resetForm:function(e,t){var r=this;this.dialogVisible=!1,this.$refs[e].resetFields(),0==t&&this.$nextTick((function(){r.$refs.list.initList(1)}))},logOption:function(e,t,r){var a={plate:"角色管理",plateRouter:"/character",user:this.$store.state.userInfo.identity_name,userId:111,action:t,time:new Date,content:e};r&&(a.beforeCon=r),this.insertJournal(a)},sysrolesCreateFunc:function(){var e=this;this.$refs.addRuleForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=21;break}return e.dialogVisible=!1,t.prev=2,a={token:e.getToken,role_name:e.addRuleForm.name,check_ids:e.check_ids},t.next=6,e.sysrolesCreate(a);case 6:s=t.sent,1==s.code?e.$message.success("添加成功!"):e.$message.error(s.msg),i={"角色名称":e.addRuleForm.name},e.logOption(i,1),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log(t.t0);case 15:return t.prev=15,e.$refs.addRuleForm.resetFields(),e.$refs.list.initList(1),t.finish(15);case 19:t.next=23;break;case 21:return console.log("error submit!!"),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,null,[[2,12,15,19]])})));return function(e){return t.apply(this,arguments)}}())}})},c=u,m=(r("ccfe"),r("2877")),d=Object(m["a"])(c,a,s,!1,null,"52e396ad",null);t["default"]=d.exports},c934:function(e,t,r){},ccfe:function(e,t,r){"use strict";var a=r("c934"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-04715b1d.b934c6b5.js.map