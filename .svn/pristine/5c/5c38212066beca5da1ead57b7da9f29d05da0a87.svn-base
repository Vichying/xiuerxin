(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db805e96"],{"0c22":function(e,t,r){},"224f":function(e,t,r){"use strict";var i=r("62bd"),a=r.n(i);a.a},2542:function(e,t,r){"use strict";var i=r("0c22"),a=r.n(i);a.a},"2c72":function(e,t,r){"use strict";var i=r("c462"),a=r.n(i);a.a},4436:function(e,t,r){"use strict";var i=r("f70a"),a=r.n(i);a.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var i=r("1d80"),a=r("5899"),l="["+a+"]",o=RegExp("^"+l+l+"*"),n=RegExp(l+l+"*$"),s=function(e){return function(t){var r=String(i(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(n,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},"62bd":function(e,t,r){},7156:function(e,t,r){var i=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var l,o;return a&&"function"==typeof(l=t.constructor)&&l!==r&&i(o=l.prototype)&&o!==r.prototype&&a(e,o),e}},7170:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"staff warp"},[r("div",{staticClass:"title"},[e._v("当前 >> "+e._s(this.$store.state.titles))]),r("div",{staticClass:"main"},[r("p",{staticStyle:{width:"100%","text-align":"right","padding-right":"5%"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisibles=!0}}},[r("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"1em"}}),e._v("添加")])],1),r("div",{staticClass:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),r("el-table-column",{attrs:{align:"center",prop:"created_at",label:"创建时间"}}),r("el-table-column",{attrs:{align:"center",prop:"recommend",label:"是否推荐"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.recommend?"是":"0"==t.row.recommend?"否":t.row.recommend)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"lex",label:"文章类型"}}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleClick(t.row)}}},[e._v("修改")]),r("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(r){return e.Delete(t.row.id)}}},[r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),r("div",{staticClass:"page"},[r("el-pagination",{attrs:{background:"","current-page":e.page,"page-size":e.limit,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleSizeChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)],1)]),r("el-dialog",{attrs:{width:"60%",title:"修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.dialogFormVisible?r("update",{attrs:{datas:e.formsdatas},on:{formok:e.formok}}):e._e()],1),r("el-dialog",{attrs:{width:"60%",title:"添加",visible:e.dialogFormVisibles},on:{"update:visible":function(t){e.dialogFormVisibles=t}}},[e.dialogFormVisibles?r("insert",{on:{formok:e.formoks}}):e._e()],1)],1)},a=[],l=(r("a434"),r("b0c0"),r("d3b7"),r("96cf"),r("1da1")),o=r("5530"),n=r("2f62"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-form",{ref:"ruleForm",staticStyle:{"margin-bottom":"20px"},attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题:","label-width":e.formLabelWidth,prop:"title"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"文章类型:","label-width":e.formLabelWidth,prop:"types_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.types_id,callback:function(t){e.$set(e.ruleForm,"types_id",t)},expression:"ruleForm.types_id"}},e._l(e.types,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"文章来源:","label-width":e.formLabelWidth,prop:"source"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},e._l(e.source,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否推荐:","label-width":e.formLabelWidth}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("否")])],1),"1"==e.ruleForm.recommend?r("el-form-item",{attrs:{label:"推荐封面:","label-width":e.formLabelWidth,prop:"imgid"}},[r("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.ruleForm.fileList1,"on-change":e.handleChange1,"auto-upload":!1,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1):e._e(),r("el-form-item",{staticStyle:{height:"420px"},attrs:{label:"内容:","label-width":e.formLabelWidth}},[r("editor",{attrs:{value:e.ruleForm.contents},on:{editor:e.editorCon}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},u=[],c=(r("fb6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"none"},attrs:{action:e.serverUrl,name:"file",headers:e.header,"show-file-list":!1,"list-type":"picture",multiple:!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload}}),r("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)}),d=[],m=(r("a9e3"),[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]),f={props:{value:{type:String},maxSize:{type:Number,default:4e3}},components:{},data:function(){return{content:this.value,quillUpdateImg:!1,editorOption:{theme:"snow",placeholder:"您想说点什么？",modules:{toolbar:{container:m,handlers:{image:function(e){e?document.querySelector(".avatar-uploader input").click():this.quill.format("image",!1)}}}}},serverUrl:"http://114.113.149.156:8909/api/filesup/files",header:{}}},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])({uploadFile:"loginModule/uploadFile"})),{},{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("editor",this.content)},beforeUpload:function(){this.quillUpdateImg=!0},uploadSuccess:function(e,t){var r=this.$refs.myQuillEditor.quill;if(1==e.code){var i=r.getSelection().index;r.insertEmbed(i,"image",e.data.file_details[0].urls),r.setSelection(i+1)}else this.$message.error("图片插入失败");this.quillUpdateImg=!1},uploadError:function(){this.quillUpdateImg=!1,this.$message.error("图片插入失败")}})},p=f,g=(r("2c72"),r("2877")),h=Object(g["a"])(p,c,d,!1,null,"4169f07e",null),b=h.exports,v={name:"insert",data:function(){return{ruleForm:{title:this.datas.title,types_id:this.datas.types_id,recommend:this.datas.recommend,source:this.datas.source,fileList1:[{url:this.datas.image_link_files.urls}],imgid:this.datas.image_link,contents:this.datas.contents},dialogVisible:!1,dialogImageUrl:"",types:[],source:[],formLabelWidth:"120px",rules:{title:[{required:!0,trigger:"blur",message:"请填文章标题"}],types_id:[{required:!0,trigger:"blur",message:"请选择文章类型"}],source:[{required:!0,trigger:"blur",message:"请选择文章来源"}],imgid:[{required:!0,trigger:"blur",message:"请上次推荐图片"}]}}},props:{datas:{type:Object}},components:{editor:b},created:function(){this.Bind()},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])({updateArt:"loginModule/updateArt",getArtTypeList:"loginModule/getArtTypeList",getArtSourceList:"loginModule/getArtSourceList",uploadFile:"loginModule/uploadFile"})),{},{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){},editorCon:function(e){this.ruleForm.contents=e},handleChange1:function(e,t){var r=this,i=new FormData;i.append("formdata",e.raw),this.uploadFile(i).then((function(e){1==e.code?(r.ruleForm.imgid=e.data.formdata[0],r.ruleForm.fileList1=t.slice(-1)):r.$message({type:"warning",message:e.msg})}))},cancel:function(){this.$emit("formok",!1)},Bind:function(){var e=this,t={column:["*"],filter:{},offset:0,limit:0};this.getArtTypeList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.types.push({value:t.data.list[r].id,label:t.data.list[r].name})})),this.getArtSourceList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.source.push({value:t.data.list[r].id,label:t.data.list[r].name})}))},submit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var r={id:e.datas.id,title:e.ruleForm.title,types_id:e.ruleForm.types_id,contents:e.ruleForm.contents,image_link:e.ruleForm.imgid,recommend:e.ruleForm.recommend,source:e.ruleForm.source};e.updateArt(r).then((function(t){1==t.code?(e.$message({message:"操作成功！",type:"success"}),e.$emit("formok","aaa")):e.$message.error(t.msg)}))}))}})},F=v,y=(r("4436"),Object(g["a"])(F,s,u,!1,null,"3b966323",null)),_=y.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-form",{ref:"ruleForm",staticStyle:{"margin-bottom":"20px"},attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题:","label-width":e.formLabelWidth,prop:"title"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"文章类型:","label-width":e.formLabelWidth,prop:"types_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.types_id,callback:function(t){e.$set(e.ruleForm,"types_id",t)},expression:"ruleForm.types_id"}},e._l(e.types,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"文章来源:","label-width":e.formLabelWidth,prop:"source"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},e._l(e.source,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否推荐:","label-width":e.formLabelWidth}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("否")])],1),"1"==e.ruleForm.recommend?r("el-form-item",{attrs:{label:"推荐封面:","label-width":e.formLabelWidth,prop:"imgid"}},[r("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.ruleForm.fileList1,"on-change":e.handleChange1,"auto-upload":!1,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1):e._e(),r("el-form-item",{staticStyle:{height:"420px"},attrs:{label:"内容:","label-width":e.formLabelWidth}},[r("editor",{on:{editor:e.editorCon}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},w=[],x={name:"insert",data:function(){return{ruleForm:{title:"",types_id:"",recommend:"0",source:"",fileList1:[],imgid:"",contents:""},dialogVisible:!1,dialogImageUrl:"",types:[],source:[],formLabelWidth:"120px",rules:{title:[{required:!0,trigger:"blur",message:"请填文章标题"}],types_id:[{required:!0,trigger:"blur",message:"请选择文章类型"}],source:[{required:!0,trigger:"blur",message:"请选择文章来源"}],imgid:[{required:!0,trigger:"blur",message:"请上次推荐图片"}]}}},props:{},components:{editor:b},created:function(){this.Bind()},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])({insertArt:"loginModule/insertArt",getArtTypeList:"loginModule/getArtTypeList",getArtSourceList:"loginModule/getArtSourceList",uploadFile:"loginModule/uploadFile"})),{},{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){},editorCon:function(e){this.ruleForm.contents=e},handleChange1:function(e,t){var r=this,i=new FormData;i.append("formdata",e.raw),this.uploadFile(i).then((function(e){1==e.code?(r.ruleForm.imgid=e.data.formdata[0],r.ruleForm.fileList1=t.slice(-1)):r.$message({type:"warning",message:e.msg})}))},cancel:function(){this.$emit("formok",!1)},Bind:function(){var e=this,t={column:["*"],filter:{},offset:0,limit:0};this.getArtTypeList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.types.push({value:t.data.list[r].id,label:t.data.list[r].name})})),this.getArtSourceList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.source.push({value:t.data.list[r].id,label:t.data.list[r].name})}))},submit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var r={title:e.ruleForm.title,types_id:e.ruleForm.types_id,contents:e.ruleForm.contents,image_link:e.ruleForm.imgid,recommend:e.ruleForm.recommend,source:e.ruleForm.source};e.insertArt(r).then((function(t){1==t.code?(e.$message({message:"操作成功！",type:"success"}),e.$emit("formok","aaa")):e.$message.error(t.msg)}))}))}})},L=x,C=(r("224f"),Object(g["a"])(L,k,w,!1,null,"b87aaaec",null)),A=C.exports,$=r("a7fe"),S={name:"cost",data:function(){return{tableData:[],dialogFormVisible:!1,loading:!0,total:0,limit:10,page:1,emails:"",formsdatas:0,dialogFormVisibles:!1}},components:{update:_,insert:A},mounted:function(){},created:function(){this.Bind(0)},methods:Object(o["a"])(Object(o["a"])({},Object(n["b"])({getArtList:"loginModule/getArtList",getArtTypeList:"loginModule/getArtTypeList",deleteArt:"loginModule/deleteArt"})),{},{getRQ:function(e){return $["a"].getRQ(e)},getname:function(e){var t=this;return new Promise((function(r,i){var a=this;t.getArtTypeList({column:["*"],filter:{id:e},offset:0,limit:0}).then((function(e){1==e.code?r(e.data.list[0].name):(a.$message.error(e.msg),i("reject return"))}))}))},Delete:function(e){var t=this;this.deleteArt({id:[parseInt(e)]}).then((function(e){1==e.code?(t.$message({message:"删除成功！",type:"success"}),t.Bind(0)):t.$message.error(e.msg)}))},Bind:function(e){var t=this;this.loading=!0;var r={column:["*"],filter:{}," orderby":"updated_at desc",offset:e,limit:10};this.getArtList(r).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(r){var i,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=r.code){e.next=17;break}t.tableData.splice(0,t.tableData.length),i=[],a=0;case 4:if(!(a<r.data.list.length)){e.next=12;break}return e.next=7,t.getname(r.data.list[a].types_id);case 7:l=e.sent,i.push({title:r.data.list[a].title,created_at:r.data.list[a].created_at,recommend:r.data.list[a].recommend,lex:l,id:r.data.list[a].id,types_id:r.data.list[a].types_id,contents:r.data.list[a].contents,image_link:r.data.list[a].image_link,source:r.data.list[a].source,image_link_files:r.data.list[a].image_link_files});case 9:a++,e.next=4;break;case 12:t.tableData=i,t.total=parseInt(r.data.count),t.limit=10,e.next=18;break;case 17:t.$message.error(r.msg);case 18:t.loading=!1;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSizeChange:function(e){this.Bind((e-1)*this.limit)},handleClick:function(e){this.formsdatas=e,this.dialogFormVisible=!0},formok:function(e){e&&this.Bind((this.page-1)*this.limit),this.dialogFormVisible=!1,this.dialogFormVisibles=!1},formoks:function(e){e&&this.Bind(0),this.dialogFormVisibles=!1}})},I=S,E=(r("2542"),Object(g["a"])(I,i,a,!1,null,"151d2392",null));t["default"]=E.exports},a7fe:function(e,t,r){"use strict";r("ac1f"),r("5319");t["a"]={getSJC:function(e){var t=new Date(e),r=t.getFullYear()+"-"+parseInt(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),i=new Date(r);i=new Date(r.replace(/-/g,"/"));return Math.round(Date.parse(i)/1e3)},getRQ:function(e){if(""==e||null==e)return"";var t=new Date(parseInt(1e3*e)),r=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var a=t.getDate();a=a<10?"0"+a:a;var l=t.getHours();l=l<10?"0"+l:l;var o=t.getMinutes(),n=t.getSeconds();o=o<10?"0"+o:o,n=n<10?"0"+n:n;var s=r+"-"+i+"-"+a+"  "+l+":"+o;return s}}},a9e3:function(e,t,r){"use strict";var i=r("83ab"),a=r("da84"),l=r("94ca"),o=r("6eeb"),n=r("5135"),s=r("c6b6"),u=r("7156"),c=r("c04e"),d=r("d039"),m=r("7c73"),f=r("241c").f,p=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,b="Number",v=a[b],F=v.prototype,y=s(m(F))==b,_=function(e){var t,r,i,a,l,o,n,s,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=h(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+u}for(l=u.slice(2),o=l.length,n=0;n<o;n++)if(s=l.charCodeAt(n),s<48||s>a)return NaN;return parseInt(l,i)}return+u};if(l(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof w&&(y?d((function(){F.valueOf.call(r)})):s(r)!=b)?u(new v(_(t)),r,w):_(t)},x=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;x.length>L;L++)n(v,k=x[L])&&!n(w,k)&&g(w,k,p(v,k));w.prototype=F,F.constructor=w,o(a,b,w)}},c462:function(e,t,r){},f70a:function(e,t,r){}}]);
//# sourceMappingURL=chunk-db805e96.9a7ff51d.js.map