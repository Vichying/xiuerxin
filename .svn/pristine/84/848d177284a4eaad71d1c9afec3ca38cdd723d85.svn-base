(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc58786"],{"19d1":function(e,t,r){},"36fc":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"update"},[r("el-form",{ref:"ruleForm",staticStyle:{"margin-bottom":"20px"},attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题:","label-width":e.formLabelWidth,prop:"title"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"文章类型:","label-width":e.formLabelWidth,prop:"types_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.types_id,callback:function(t){e.$set(e.ruleForm,"types_id",t)},expression:"ruleForm.types_id"}},e._l(e.types,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"文章来源:","label-width":e.formLabelWidth,prop:"source"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},e._l(e.source,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否推荐:","label-width":e.formLabelWidth}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("否")])],1),r("el-form-item",{attrs:{label:"推荐封面:","label-width":e.formLabelWidth,prop:"imgid"}},[r("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.ruleForm.fileList1,"on-change":e.handleChange1,"auto-upload":!1,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),r("el-form-item",{staticStyle:{height:"420px"},attrs:{label:"内容:","label-width":e.formLabelWidth}},[r("editor",{on:{editor:e.editorCon}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},o=[],a=(r("fb6a"),r("b0c0"),r("5530")),l=r("2f62"),n=r("2ef3"),s={name:"insert",data:function(){return{ruleForm:{title:"",types_id:"",recommend:"0",source:"",fileList1:[],imgid:"",contents:""},dialogVisible:!1,dialogImageUrl:"",types:[],source:[],formLabelWidth:"120px",imgurls:"",rules:{title:[{required:!0,trigger:"blur",message:"请填文章标题"}],types_id:[{required:!0,trigger:"blur",message:"请选择文章类型"}],source:[{required:!0,trigger:"blur",message:"请选择文章来源"}],imgid:[{required:!0,trigger:"blur",message:"请上次推荐图片"}]}}},props:{},components:{editor:n["default"]},created:function(){this.Bind()},methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])({insertArt:"loginModule/insertArt",getArtTypeList:"loginModule/getArtTypeList",getArtSourceList:"loginModule/getArtSourceList",uploadFile:"loginModule/uploadFile",insertJournal:"loginModule/insertJournal"})),{},{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){},editorCon:function(e){this.ruleForm.contents=e},handleChange1:function(e,t){var r=this,i=new FormData;i.append("formdata",e.raw),this.uploadFile(i).then((function(e){1==e.code?(r.ruleForm.imgid=e.data.formdata[0],r.ruleForm.fileList1=t.slice(-1),r.imgurls=e.data.formdata_details[0].urls):r.$message({type:"warning",message:e.msg})}))},cancel:function(){this.$emit("formok",!1)},Bind:function(){var e=this,t={token:this.$store.state.token,column:["*"],filter:{},offset:0,limit:0};this.getArtTypeList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.types.push({value:t.data.list[r].id,label:t.data.list[r].name})})),this.getArtSourceList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.source.push({value:t.data.list[r].id,label:t.data.list[r].name})}))},getNameType:function(e){for(var t=0;t<this.types.length;t++)if(parseInt(this.types[t].value)==parseInt(e))return this.types[t].label},getSource:function(e){for(var t=0;t<this.source.length;t++)if(parseInt(e)==parseInt(this.source[t].value))return this.source[t].label},submit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var r={token:e.$store.state.token,title:e.ruleForm.title,types_id:e.ruleForm.types_id,contents:e.ruleForm.contents,image_link:e.ruleForm.imgid,recommend:e.ruleForm.recommend,source:e.ruleForm.source};e.insertArt(r).then((function(t){if(1==t.code){e.$message({message:"操作成功！",type:"success"});var r={plate:"文章管理",plateRouter:"/article",user:e.$store.state.userInfo.identity_name,userId:111,action:1,time:new Date,content:{"文章标题":e.ruleForm.title,"文章类型":e.getNameType(e.ruleForm.types_id),"文章来源":e.getSource(e.ruleForm.source),"是否推荐":1==parseInt(e.ruleForm.recommend)?"是":"否","推荐封面":'<img style="max-height: 100%;max-width: 100%;" src="'.concat(e.imgurls,'"/>'),"内容":e.ruleForm.contents}};e.insertJournal(r),e.$emit("formok","aaa")}else e.$message.error(t.msg)}))}))}})},u=s,c=(r("5488f"),r("2877")),d=Object(c["a"])(u,i,o,!1,null,"161be5b4",null);t["default"]=d.exports},"45fc":function(e,t,r){"use strict";var i=r("23e7"),o=r("b727").some,a=r("a640"),l=r("ae40"),n=a("some"),s=l("some");i({target:"Array",proto:!0,forced:!n||!s},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"5488f":function(e,t,r){"use strict";var i=r("19d1"),o=r.n(i);o.a},7170:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"staff warp"},[r("div",{staticClass:"title"},[e._v("当前 >> "+e._s(this.$store.state.titles))]),r("div",{staticClass:"main"},[r("p",{staticStyle:{width:"100%","text-align":"right","padding-right":"5%"}},[e.getAuthorityFunc("create")?r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisibles=!0}}},[r("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"1em"}}),e._v("添加")]):e._e()],1),r("div",{staticClass:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),r("el-table-column",{attrs:{align:"center",prop:"created_at",label:"创建时间"}}),r("el-table-column",{attrs:{align:"center",prop:"recommend",label:"是否推荐"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"==t.row.recommend?"是":"0"==t.row.recommend?"否":t.row.recommend)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"types_id",label:"文章类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getNameType(t.row.types_id))+" ")]}}])}),e.result(e.getAuthorityFunc("edit"),e.getAuthorityFunc("delete"))?r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getAuthorityFunc("edit")?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleClick(t.row)}}},[e._v("修改")]):e._e(),e.getAuthorityFunc("delete")?r("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(r){return e.Delete(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1):e._e()]}}],null,!1,1531094917)}):e._e()],1),r("div",{staticClass:"page"},[r("el-pagination",{attrs:{background:"","current-page":e.page,"page-size":e.limit,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleSizeChange,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)],1)]),r("el-dialog",{attrs:{width:"60%",title:"修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.dialogFormVisible?r("update",{attrs:{datas:e.formsdatas},on:{formok:e.formok}}):e._e()],1),r("el-dialog",{attrs:{width:"60%",title:"添加",visible:e.dialogFormVisibles},on:{"update:visible":function(t){e.dialogFormVisibles=t}}},[e.dialogFormVisibles?r("insert",{on:{formok:e.formoks}}):e._e()],1)],1)},o=[],a=(r("7db0"),r("45fc"),r("a434"),r("b0c0"),r("96cf"),r("1da1")),l=r("5530"),n=r("2f62"),s=r("a178"),u=r("36fc"),c=r("a7fe"),d={name:"cost",data:function(){return{tableData:[],dialogFormVisible:!1,loading:!0,total:0,limit:10,page:1,emails:"",formsdatas:0,dialogFormVisibles:!1,typeList:[],source:[]}},components:{update:s["default"],insert:u["default"]},computed:Object(l["a"])({},Object(n["c"])({getAuthority:"getAuthority"})),mounted:function(){},created:function(){var e=this;this.getname(),this.Bind(0);var t={token:this.$store.state.token,column:["*"],filter:{},offset:0,limit:0};this.getArtSourceList(t).then((function(t){if(1==t.code)for(var r=0;r<t.data.list.length;r++)e.source.push({id:t.data.list[r].id,label:t.data.list[r].name})}))},methods:Object(l["a"])(Object(l["a"])({},Object(n["b"])({getArtList:"loginModule/getArtList",getArtTypeList:"loginModule/getArtTypeList",deleteArt:"loginModule/deleteArt",getArtSourceList:"loginModule/getArtSourceList",insertJournal:"loginModule/insertJournal"})),{},{result:function(e,t){return 0!=e||0!=t},getAuthorityFunc:function(e){var t=this;if(this.getAuthority&&0!=this.getAuthority.length){var r=this.getAuthority.find((function(e){return e.code==t.$route.path}));if(r&&r.child&&0!=r.child.length)return r.child.some((function(t){return t.code==e}))}},getSource:function(e){for(var t=0;t<this.source.length;t++)if(e==this.source[t].id)return this.source[t].label},getRQ:function(e){return c["a"].getRQ(e)},getNameType:function(e){for(var t=0;t<this.typeList.length;t++)if(this.typeList[t].id==e)return this.typeList[t].name},getname:function(){var e=this;this.getArtTypeList({token:this.$store.state.token,column:["*"],filter:{},offset:0,limit:0}).then((function(t){1==t.code?e.typeList=t.data.list:e.$message.error(t.msg)}))},Delete:function(e){var t=this;this.deleteArt({token:this.$store.state.token,id:[parseInt(e.id)]}).then((function(r){if(1==r.code){t.$message({message:"删除成功！",type:"success"});var i={plate:"文章管理",plateRouter:"/article",user:t.$store.state.userInfo.identity_name,userId:111,action:3,time:new Date,content:{"文章标题":e.title,"文章类型":t.getNameType(e.types_id),"文章来源":t.getSource(e.source),"是否推荐":1==parseInt(e.recommend)?"是":"否","推荐封面":'<img style="max-height: 100%;max-width: 100%;" src="'.concat(e.image_link_files.urls,'"/>'),"内容":e.contents}};t.insertJournal(i),t.Bind(0)}else t.$message.error(r.msg)}))},Bind:function(e){var t=this;0==e&&(this.page=1),this.loading=!0;var r={token:this.$store.state.token,column:["*"],filter:{}," orderby":"updated_at desc",offset:e,limit:10};this.getArtList(r).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==r.code?(t.tableData.splice(0,t.tableData.length),t.tableData=r.data.list,t.total=parseInt(r.data.count),t.limit=10):t.$message.error(r.msg),t.loading=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSizeChange:function(e){this.Bind((e-1)*this.limit)},handleClick:function(e){this.formsdatas=e,this.dialogFormVisible=!0},formok:function(e){e&&this.Bind((this.page-1)*this.limit),this.dialogFormVisible=!1,this.dialogFormVisibles=!1},formoks:function(e){e&&this.Bind(0),this.dialogFormVisibles=!1}})},m=d,f=(r("f5c5"),r("2877")),g=Object(f["a"])(m,i,o,!1,null,"f243615a",null);t["default"]=g.exports},a434:function(e,t,r){"use strict";var i=r("23e7"),o=r("23cb"),a=r("a691"),l=r("50c4"),n=r("7b0b"),s=r("65f0"),u=r("8418"),c=r("1dde"),d=r("ae40"),m=c("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var r,i,c,d,m,f,v=n(this),y=l(v.length),F=o(e,y),_=arguments.length;if(0===_?r=i=0:1===_?(r=0,i=y-F):(r=_-2,i=h(g(a(t),0),y-F)),y+r-i>p)throw TypeError(b);for(c=s(v,i),d=0;d<i;d++)m=F+d,m in v&&u(c,d,v[m]);if(c.length=i,r<i){for(d=F;d<y-i;d++)m=d+i,f=d+r,m in v?v[f]=v[m]:delete v[f];for(d=y;d>y-i+r;d--)delete v[d-1]}else if(r>i)for(d=y-i;d>F;d--)m=d+i-1,f=d+r-1,m in v?v[f]=v[m]:delete v[f];for(d=0;d<r;d++)v[d+F]=arguments[d+2];return v.length=y-i+r,c}})},a7fe:function(e,t,r){"use strict";r("ac1f"),r("5319");t["a"]={getSJC:function(e){var t=new Date(e),r=t.getFullYear()+"-"+parseInt(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),i=new Date(r);i=new Date(r.replace(/-/g,"/"));return Math.round(Date.parse(i)/1e3)},getRQ:function(e){if(""==e||null==e)return"";var t=new Date(parseInt(1e3*e)),r=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var o=t.getDate();o=o<10?"0"+o:o;var a=t.getHours();a=a<10?"0"+a:a;var l=t.getMinutes(),n=t.getSeconds();l=l<10?"0"+l:l,n=n<10?"0"+n:n;var s=r+"-"+i+"-"+o+"  "+a+":"+l;return s}}},f0eb:function(e,t,r){},f5c5:function(e,t,r){"use strict";var i=r("f0eb"),o=r.n(i);o.a}}]);
//# sourceMappingURL=chunk-1bc58786.3e04a8a6.js.map